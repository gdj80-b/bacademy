<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.goodee.bacademy.mapper.StudentPaymentMapper">
	<select id="getMyCashList" resultType="com.goodee.bacademy.vo.PaymentVO">		
		SELECT 
		    application.state  state,
		    application.date AS date,  
		    lecture.lecture_name AS info,
		    CASE 
		        WHEN application.state = '수강' THEN -lecture.lecture_price
		        ELSE lecture.lecture_price
		    END AS chargeCash,   
		    application.application_no AS applicationNum,
		    application.lecture_no AS lectureNum,
		    '' AS payNum
		FROM application
			 JOIN lecture ON lecture.lecture_no = application.lecture_no
		UNION
		SELECT 
		    reason AS state,
		    create_date AS date,
		    '' AS info,
		    cash AS chargeCash,    
		    '' AS applicationNum,
		    '' AS lectureNum,
		    cash_no AS payNum
		FROM cash_history
		WHERE id = #{id}
		ORDER BY date DESC;
	</select>
	
	
	
</mapper>
